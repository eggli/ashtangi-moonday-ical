(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){var n=a(36),o=0,r=1,i=2,l=3,c=3,s=2444238.5,u=278.83354,m=282.596403,d=.016718,h=149585e3,p=.533128,f=64.975464,g=349.383063,v=.0549,E=384401,y=.5181*E,w=29.53058868;function b(e){return Math.PI/180*e}function T(e){return Math.sin(b(e))}function k(e){return Math.cos(b(e))}function M(e,t){var a=(e- -22089456e5)/864e5/36525;return 2415020.75933+w*t+(1178e-7-1.55e-7*a)*a*a+33e-5*T(166.56+(132.87-.009173*a)*a)}function x(e,t){var a=1/1236.85*(e+=.25*(t&=c)),s=2415020.75933+w*e+(1178e-7-1.55e-7*a)*a*a+33e-5*T(166.56+(132.87-.009173*a)*a),u=359.2242+29.10535608*e-(333e-7-347e-8*a)*a*a,m=306.0253+385.81691806*e+(.0107306+1236e-8*a)*a*a,d=21.2964+390.67050646*e-(.0016528-239e-8*a)*a*a;switch(t){case o:case i:s+=(.1734-393e-6*a)*T(u)+.0021*T(2*u)-.4068*T(m)+.0161*T(2*m)-4e-4*T(3*m)+.0104*T(2*d)-.0051*T(u+m)-.0074*T(u-m)+4e-4*T(2*d+u)-4e-4*T(2*d-u)-6e-4*T(2*d+m)+.001*T(2*d-m)+5e-4*T(u+2*m);break;case r:case l:s+=(.1721-4e-4*a)*T(u)+.0021*T(2*u)-.628*T(m)+.0089*T(2*m)-4e-4*T(3*m)+.0079*T(2*d)-.0119*T(u+m)-.0047*T(u-m)+3e-4*T(2*d+u)-4e-4*T(2*d-u)-6e-4*T(2*d+m)+.0021*T(2*d-m)+3e-4*T(u+2*m)+4e-4*T(u-2*m)-3e-4*T(2*u+m),s+=(t<i?1:-1)*(.0028-4e-4*k(u)+3e-4*k(m))}return n.toDate(s)}t.PHASE_NEW=o,t.PHASE_FIRST=r,t.PHASE_FULL=i,t.PHASE_LAST=l,t.phase=function(e){e||(e=new Date);var t,a,o=(e=n.fromDate(e))-s,r=360/365.2422*o+(u-m),i=2*(t=Math.atan(Math.sqrt((1+d)/(1-d))*Math.tan(.5*function(e,t){for(var a=e=b(e);;){var n=a-t*Math.sin(a)-e;if(a-=n/(1-t*Math.cos(a)),Math.abs(n)<=1e-6)break}return a}(r,d))),180/Math.PI*t),l=m+i,c=(1+d*k(i))/(1-d*d),M=f+13.1763966*o,x=M-.1114041*o-g,C=1.2739*T(2*(M-l)-x),O=.1858*T(r),D=x+C-O-.37*T(r),P=6.2886*T(D),S=M+C+P-O+.214*T(2*D),Y=(a=S-l+.6583*T(2*(S-l)))-360*Math.floor(a/360),A=E*(1-v*v)/(1+v*k(D+P));return{phase:1/360*Y,illuminated:.5*(1-k(Y)),age:w/360*Y,distance:A,angular_diameter:y/A,sun_distance:h/c,sun_angular_diameter:p*c}},t.phase_hunt=function(e){e||(e=new Date);var t=new Date(e.getTime()-3888e6),a=Math.floor(12.3685*(t.getFullYear()+1/12*t.getMonth()-1900)),c=M(t.getTime(),a);e=n.fromDate(e);for(var s=a+1,u=M(t=c+w,s);c>e||e>=u;)a++,c=u,u=M(t+=w,++s);return{new_date:x(a,o),q1_date:x(a,r),full_date:x(a,i),q3_date:x(a,l),nextnew_date:x(s,o)}},t.phase_range=function(e,t,a){e=e.getTime(),t=t.getTime();for(var n,o=new Date(e-3888e6),r=x(n=Math.floor(12.3685*(o.getFullYear()+1/12*o.getMonth()-1900)),a);r.getTime()<e;)r=x(++n,a);for(var i=[];r.getTime()<=t;)i.push(r),r=x(++n,a);return i}},29:function(e,t,a){e.exports=a(47)},34:function(e,t,a){},36:function(e,t){t.fromDate=function(e){return e.getTime()/864e5+2440587.5},t.toDate=function(e){return new Date(864e5*(e-2440587.5))}},47:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),l=(a(34),a(19)),c=a(10),s=a(20),u=a(21),m=a(27),d=a(22),h=a(28),p=a(13),f=a(12),g=a.n(f),v=a(49),E=a(50),y=a(52),w=a(53),b=a(51),T=a(5),k=a.n(T),M=a(23),x=a.n(M),C=a(24),O=a.n(C),D=Object(p.a)(Array(48).keys()).map(function(e){var t=e/2,a=Math.floor(t);return String(a).padStart(2,"0")+":"+String(60*(t-a)).padStart(2,"0")}),P={"+1":{label:"+",getEventTime:function(e){return k()(e).add(1,"days")}},"-1":{label:"-",getEventTime:function(e){return k()(e).subtract(1,"days")}},"":{label:"",getEventTime:function(e){return k()(e)}}},S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,o=t.name;a.setState(Object(c.a)({},o,n))},a.getMoonPhases=function(e){var t=new Date,n=new Date(a.state.upToYear+"-12-31T23:59:59.999Z");return g.a.phase_range(t,n,e)},a.getFullMoons=function(){return a.getMoonPhases(g.a.PHASE_FULL).map(function(e){return{time:e,phase:"\ud83c\udf15Full"}})},a.getNewMoons=function(){return a.getMoonPhases(g.a.PHASE_NEW).map(function(e){return{time:e,phase:"\ud83c\udf11New"}})},a.getMoondays=function(){var e=a.getFullMoons(),t=a.getNewMoons();return[].concat(Object(p.a)(e),Object(p.a)(t)).sort(function(e,t){return e.time<t.time?-1:e.time>t.time?1:0})},a.getAvoidanceOptions=function(e){var t=k()(e),n=k()(t.year()+"-"+(Number(t.month())+1)+"-"+t.date()+" "+a.state.practiceTime,"YYYY-MM-DD HH:mm"),o=k()(n).subtract(24,"hours"),r=k()(n).add(24,"hours"),i={diff:Math.abs(k.a.duration(k()(o).diff(t)).asHours()),option:P[-1]},c={diff:Math.abs(k.a.duration(k()(n).diff(t)).asHours()),option:P[""]},s=[i,c,{diff:Math.abs(k.a.duration(k()(r).diff(t)).asHours()),option:P["+1"]}];return console.log(Object(l.a)({peakTime:t.toString()},s)),s.reduce(function(e,t){return e.diff>t.diff?t:e},c).option},a.generateEvents=function(){var e=a.getMoondays(),t=x()({domain:"eggli.github.io",name:"Moondays",timezone:a.state.timezone});e.forEach(function(e){var n=a.getAvoidanceOptions(e.time),o=a.state.avoidPeakTime&&n,r=o?n.label:"",i=o?n.getEventTime(e.time):e.time,l=e.phase+" Moon"+r+(a.state.showExactTime?"@"+k()(i).format("HH:mm:ss"):""),c=t.createEvent({start:i,allDay:!0,summary:l,description:l});a.state.reminder&&c.createAlarm({type:"display",trigger:k()(i).subtract(Number(a.state.reminderOption),"days")})});var n=t.toString(),o=new Blob([n],{type:"text/calendar"}),r=URL.createObjectURL(o);O.a.saveAs(o,"moondays.ics"),URL.revokeObjectURL(r)},a.state={timezone:k.a.tz.guess(),avoidPeakTime:!0,practiceTime:"06:00",upToYear:String(k()().add(1,"Y").year()),reminder:!1,reminderOption:"1",showExactTime:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.showExactTime?"YYYY/MM/DD HH:mm:ss":"YYYY/MM/DD";return o.a.createElement(v.a,null,o.a.createElement(E.a,null,o.a.createElement("h1",null,"Ashtanga Moonday Calendar"),o.a.createElement("p",null,"Namaste Ashtangis, this is a simple tool to generate Moondays as events with optional reminders on your calendar."),o.a.createElement("h2",null,"Usage"),o.a.createElement("p",null,"Fill the forms below to create your own moonday calendar events, click the 'Download Moonday Events' button to download desired calendar events file, on mobile devices, it should be imported to your calendar under your permission, on desktop computers, open the downloaded file to import these events to your calendar."),o.a.createElement("p",null,o.a.createElement("strong",null,"Please open this web page in Safari on iOS devices, otherwise, you may see a blank page after download.")),o.a.createElement(y.a,null,o.a.createElement(y.a.Group,{controlId:"upToYear"},o.a.createElement(y.a.Label,null,"Generate moonday events up to this year"),o.a.createElement(y.a.Control,{name:"upToYear",type:"number",value:this.state.upToYear,min:k()().year(),max:k()().year()+3,onChange:this.handleInputChange}),o.a.createElement(y.a.Text,{className:"text-muted"},"Type\xa0",k()().year()+1,"\xa0 here and you will get moondays up to last day of year\xa0",k()().year()+1,".")),o.a.createElement(y.a.Group,{controlId:"showExactTime"},o.a.createElement(y.a.Label,null,"Show exact full/new phase peak time"),o.a.createElement(y.a.Check,{type:"checkbox",name:"showExactTime",checked:this.state.showExactTime,onChange:this.handleInputChange})),o.a.createElement(y.a.Group,{controlId:"avoidPeakTime"},o.a.createElement(y.a.Label,null,"Avoid full/new phase peak time"),o.a.createElement(y.a.Check,{type:"checkbox",name:"avoidPeakTime",checked:this.state.avoidPeakTime,onChange:this.handleInputChange}),o.a.createElement(y.a.Text,{className:"text-muted"},"By checking this, full/new moon phases that too close to your practice time will be shifted to next day. Moondays that shifted will be marked with a plus sign (+) or a minus sign (-).")),this.state.avoidPeakTime?o.a.createElement(y.a.Group,{controlId:"practiceTime"},o.a.createElement(y.a.Label,null,"What's your regular practice time?"),o.a.createElement(y.a.Control,{as:"select",name:"practiceTime",value:this.state.practiceTime,onChange:this.handleInputChange},D.map(function(e){return o.a.createElement("option",{key:e},e)})),o.a.createElement(y.a.Text,{className:"text-muted"},"For example, a full moon peaked at 1st of April, 19:00 and your practice time is 06:00 in the morning, that moonday will be shifted to 2nd of April or 31th of March due to it's too close (within 12 hours) to your practice time.")):null,o.a.createElement(y.a.Group,{controlId:"reminderOptions"},o.a.createElement(y.a.Label,null,"Reminder Options"),o.a.createElement(y.a.Check,{type:"checkbox",name:"reminder",checked:this.state.reminder,onChange:this.handleInputChange}),o.a.createElement(y.a.Text,{className:"text-muted"},"By checking this, a reminder will be set into moonday events, a.k.a. Moonday Eve Party Time."))),this.state.reminder?o.a.createElement(y.a.Group,{controlId:"reminderOption"},o.a.createElement(y.a.Label,null,"When should you get notified before moonday?"),o.a.createElement(y.a.Control,{as:"select",name:"reminderOption",value:this.state.reminderOption,onChange:this.handleInputChange},o.a.createElement("option",{value:"1"},"One day"),o.a.createElement("option",{value:"2"},"Two days")),o.a.createElement(y.a.Text,{className:"text-muted"},"You will be notifed on desired timing, e.g. Two days before Moonday for night activities arrangement.")):null,o.a.createElement(w.a,{variant:"primary",onClick:this.generateEvents},"Download Moonday Events"),o.a.createElement("p",null),o.a.createElement("h2",null,"Questions? Suggestions?"),o.a.createElement("p",null,"Contact me: aeggli@gmail.com"),o.a.createElement("h2",null,"Moonday Events Preview"),o.a.createElement("p",null,"Listing up to 50 moondays."),o.a.createElement(b.a,{striped:!0,bordered:!0,responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Moon Phase"),o.a.createElement("th",null,"Date"))),o.a.createElement("tbody",null,this.getMoondays().slice(0,50).map(function(a){var n=e.getAvoidanceOptions(a.time),r=e.state.avoidPeakTime&&n,i=r?n.getEventTime(a.time).format(t):k()(a.time).format(t);return o.a.createElement("tr",{key:a.time},o.a.createElement("td",null,a.phase,r?n.label:""),o.a.createElement("td",null,i))})))))}}]),t}(n.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(45);i.a.render(o.a.createElement(S,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ashtangi-moonday-ical",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ashtangi-moonday-ical","/service-worker.js");Y?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):A(e)})}}()}},[[29,2,1]]]);
//# sourceMappingURL=main.85218ccd.chunk.js.map